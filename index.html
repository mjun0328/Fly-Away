<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>날아가 버렸으면 좋겠어</title>
    <meta
      name="description"
      content="나만의 '학교가 날아가 버렸으면 좋겠어'를 만들어 보세요"
    />
    <meta property="og:title" content="날아가 버렸으면 좋겠어" />
    <meta property="og:image" content="./asset/ogcard.jpg" />
    <meta
      property="og:description"
      content="나만의 '학교가 날아가 버렸으면 좋겠어'를 만들어 보세요"
    />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-0LNCLXJ0B8"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-0LNCLXJ0B8');
    </script>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-5DSGMCCN');
    </script>

    <link rel="stylesheet" href="./style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- es-hangul 모듈은 번들러 사용을 전제로 작성되었으므로, 아래와 같은 코드가 필요합니다 -->
    <script>
      const module = {};
    </script>
    <script src="https://cdn.jsdelivr.net/npm/es-hangul@2.3.2/dist/index.min.js"></script>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-5DSGMCCN"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>

    <header>
      <h1>
        <div>
          <div class="header-text">
            <span>학교가&nbsp;</span>
            <span>회사가&nbsp;</span>
            <span>친구가&nbsp;</span>
            <span>모두가&nbsp;</span>
            <span>학교가&nbsp;</span>
          </div>
        </div>
        <span>날아가 버렸으면 좋겠어</span>
      </h1>
      <p>나만의 학교가 날아가 버렸으면 좋겠어 짤을 만들어보세요</p>
    </header>
    <main>
      <div>
        <canvas id="canvas" width="458" height="580"></canvas>
      </div>
      <section id="toolbox-1" class="toolbox">
        <div class="mb-5">
          <label for="title-input" class="form-label"
            >무엇이 날아가 버렸으면 좋겠나요?</label
          >
          <input
            type="text"
            id="title-input"
            class="form-control"
            value="학교"
            maxlength="3"
            onchange="draw()"
          />
          <span class="form-text">3글자까지만 입력할 수 있어요</span>
        </div>
        <div class="mb-5">
          <label class="form-label">어느 표현이 자연스러운가요?</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="josa1"
              name="josa-input"
              value="이"
              onchange="draw()"
            />
            <label
              id="josa1-label"
              class="form-check-label"
              for="josa1"
              data-value="이"
            >
              학교<b>이</b> 날아가버렸으면 좋겠어
            </label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="josa2"
              name="josa-input"
              value="가"
              onchange="draw()"
              checked
            />
            <label
              id="josa2-label"
              class="form-check-label"
              for="josa2"
              data-value="가"
            >
              학교<b>가</b> 날아가버렸으면 좋겠어
            </label>
          </div>
        </div>
        <div class="mb-5">
          <label class="form-label"
            >글쓴이, 그린이, 옮긴이를 정해볼 수 있어요</label
          >
          <div class="input-group mb-2">
            <label class="input-group-text" for="author-input">글쓴이</label>
            <input
              type="text"
              class="form-control"
              id="author-input"
              value="에벨리네 히슬러"
              onchange="draw()"
            />
          </div>
          <div class="input-group mb-2">
            <label class="input-group-text" for="illustrator-input"
              >그린이</label
            >
            <input
              type="text"
              class="form-control"
              id="illustrator-input"
              value="마렌 브리스발터"
              onchange="draw()"
            />
          </div>
          <div class="input-group">
            <label class="input-group-text" for="translator-input"
              >옮긴이</label
            >
            <input
              type="text"
              class="form-control"
              id="translator-input"
              value="이지연"
              onchange="draw()"
            />
          </div>
        </div>
        <div class="mb-4">
          <label for="overlay-input" class="form-label"
            >날아가 버릴 물체의 배경 없는 사진(png)을 골라주세요</label
          >
          <input
            class="form-control mb-2"
            type="file"
            id="overlay-input"
            accept="image/png"
          />
          <a
            class="link-underline link-underline-opacity-0 link-underline-opacity-75-hover"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#imageInfoModal"
            >어떤 사진을 업로드해야 하나요?</a
          >
        </div>
        <div class="button-group">
          <button type="button" class="btn btn-light" onclick="switchToolbox()">
            사진 상세 조정하기
          </button>
          <button type="button" class="btn btn-primary" onclick="download()">
            완성본 다운로드하기
          </button>
        </div>
      </section>

      <section id="toolbox-2" class="toolbox" hidden>
        <div class="row">
          <div class="col mb-5">
            <label for="title-input" class="form-label">가로 위치</label>
            <div class="input-group">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, -10)"
              >
                -
              </button>
              <input
                type="text"
                class="form-control text-center"
                id="x-input"
                value="0"
                inputmode="numeric"
                oninput="this.value = this.value.replace(/-\D/g, '')"
                onchange="this.value = parseInt(this.value); draw();"
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, 10)"
              >
                +
              </button>
            </div>
          </div>
          <div class="col mb-5">
            <label for="title-input" class="form-label">세로 위치</label>
            <div class="input-group">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, -10)"
              >
                -
              </button>
              <input
                type="text"
                class="form-control text-center"
                id="y-input"
                value="0"
                inputmode="numeric"
                oninput="this.value = this.value.replace(/-\D/g, '')"
                onchange="this.value = parseInt(this.value); draw();"
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, 10)"
              >
                +
              </button>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col mb-5">
            <label for="title-input" class="form-label">크기</label>
            <div class="input-group">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, -10)"
              >
                -
              </button>
              <input
                type="text"
                class="form-control text-center"
                id="scale-input"
                value="100"
                inputmode="numeric"
                oninput="this.value = this.value.replace(/-\D/g, '')"
                onchange="this.value = parseInt(this.value); draw();"
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, 10)"
              >
                +
              </button>
            </div>
          </div>
          <div class="col mb-5">
            <label for="title-input" class="form-label">각도</label>
            <div class="input-group">
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, -10)"
              >
                -
              </button>
              <input
                type="text"
                class="form-control text-center"
                id="degree-input"
                value="12"
                inputmode="numeric"
                oninput="this.value = this.value.replace(/-\D/g, '')"
                onchange="this.value = parseInt(this.value); draw();"
              />
              <button
                class="btn btn-outline-secondary"
                type="button"
                onclick="modifyValue(event, 10)"
              >
                +
              </button>
            </div>
          </div>
        </div>
        <div class="button-group">
          <button type="button" class="btn btn-light" onclick="switchToolbox()">
            돌아가기
          </button>
          <button type="button" class="btn btn-primary" onclick="download()">
            완성본 다운로드하기
          </button>
        </div>
      </section>

      <div
        class="modal fade"
        id="imageInfoModal"
        tabindex="-1"
        aria-labelledby="imageInfoModalLabel"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"
        >
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="imageInfoModalLabel">
                어떤 사진을 업로드해야 하나요?
              </h1>
            </div>
            <div class="modal-body">
              날아갈 물체의 배경 없는 사진(png 확장자)이면 어떤 사진이든 좋아요.
              기울일 필요도, 흔들리는 효과를 넣을 필요도 없어요. 자동으로
              흔들리는 듯한 효과를 넣어주기 때문에 배경을 완벽히 제거하지 않아도
              티가 나지 않아요. 아래 예시를 참고해 보세요.
              <img style="width: 100%" src="./asset/sample.jpg" />
              업로드된 사진은 사용자 디바이스에서만 처리되고 서버에 전송되지
              않아요.
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary"
                data-bs-dismiss="modal"
              >
                이해했어요
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div>
        <p>
          &copy; 2025.
          <a href="https://github.com/mjun0328">Kim Minjun</a>
          All rights reserved.
        </p>
        <p><a href="https://github.com/mjun0328/Fly-Away">GitHub</a></p>
      </div>
      <p>
        카카오톡 등 인앱 브라우저에서는 정상적으로 다운로드되지 않을 수
        있습니다. 외부 브라우저(Safari, Chrome 등) 환경에서 접속해 주세요.
      </p>
    </footer>

    <div class="loading">
      <span style="font-family: 'RixMomsBlanketR'">_</span>
      <span style="font-family: 'Pretendard Variable'">_</span>
    </div>
    <script src="./main.js"></script>
  </body>
</html>
